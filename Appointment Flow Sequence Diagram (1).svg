<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <!-- Background -->
  <rect width="1200" height="800" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="600" y="30" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">Non-Guided Appointment Booking Flow</text>
  
  <!-- Actors -->
  <rect x="50" y="60" width="120" height="40" fill="#f5f5f5" stroke="#000000" stroke-width="2" rx="5" ry="5"/>
  <text x="110" y="85" font-family="Arial" font-size="16" text-anchor="middle">Customer</text>
  <line x1="110" y1="100" x2="110" y2="750" stroke="#000000" stroke-width="1" stroke-dasharray="5,5"/>
  
  <rect x="220" y="60" width="120" height="40" fill="#f5f5f5" stroke="#000000" stroke-width="2" rx="5" ry="5"/>
  <text x="280" y="85" font-family="Arial" font-size="16" text-anchor="middle">Browser</text>
  <line x1="280" y1="100" x2="280" y2="750" stroke="#000000" stroke-width="1" stroke-dasharray="5,5"/>
  
  <rect x="390" y="60" width="120" height="40" fill="#f5f5f5" stroke="#000000" stroke-width="2" rx="5" ry="5"/>
  <text x="450" y="85" font-family="Arial" font-size="16" text-anchor="middle">App.tsx</text>
  <line x1="450" y1="100" x2="450" y2="750" stroke="#000000" stroke-width="1" stroke-dasharray="5,5"/>
  
  <rect x="560" y="60" width="150" height="40" fill="#f5f5f5" stroke="#000000" stroke-width="2" rx="5" ry="5"/>
  <text x="635" y="85" font-family="Arial" font-size="16" text-anchor="middle">AppointmentFlow</text>
  <line x1="635" y1="100" x2="635" y2="750" stroke="#000000" stroke-width="1" stroke-dasharray="5,5"/>
  
  <rect x="760" y="60" width="120" height="40" fill="#f5f5f5" stroke="#000000" stroke-width="2" rx="5" ry="5"/>
  <text x="820" y="85" font-family="Arial" font-size="16" text-anchor="middle">ChatInterface</text>
  <line x1="820" y1="100" x2="820" y2="750" stroke="#000000" stroke-width="1" stroke-dasharray="5,5"/>
  
  <rect x="930" y="60" width="120" height="40" fill="#f5f5f5" stroke="#000000" stroke-width="2" rx="5" ry="5"/>
  <text x="990" y="85" font-family="Arial" font-size="16" text-anchor="middle">Backend</text>
  <line x1="990" y1="100" x2="990" y2="750" stroke="#000000" stroke-width="1" stroke-dasharray="5,5"/>
  
  <rect x="1080" y="60" width="120" height="40" fill="#f5f5f5" stroke="#000000" stroke-width="2" rx="5" ry="5"/>
  <text x="1140" y="85" font-family="Arial" font-size="16" text-anchor="middle">Salesforce</text>
  <line x1="1140" y1="100" x2="1140" y2="750" stroke="#000000" stroke-width="1" stroke-dasharray="5,5"/>
  
  <rect x="1230" y="60" width="120" height="40" fill="#f5f5f5" stroke="#000000" stroke-width="2" rx="5" ry="5"/>
  <text x="1290" y="85" font-family="Arial" font-size="16" text-anchor="middle">OpenAI</text>
  <line x1="1290" y1="100" x2="1290" y2="750" stroke="#000000" stroke-width="1" stroke-dasharray="5,5"/>
  
  <!-- Section: Customer Login -->
  <rect x="50" y="140" width="1100" height="30" fill="#e6e6e6" stroke="#000000" stroke-width="1"/>
  <text x="600" y="160" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Customer Login</text>
  
  <!-- Customer Login Messages -->
  <line x1="110" y1="200" x2="280" y2="200" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="195" y="190" font-family="Arial" font-size="14" text-anchor="middle">Opens application</text>
  
  <line x1="280" y1="230" x2="450" y2="230" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="365" y="220" font-family="Arial" font-size="14" text-anchor="middle">Load App component</text>
  
  <line x1="450" y1="260" x2="990" y2="260" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="720" y="250" font-family="Arial" font-size="14" text-anchor="middle">GET /api/auth/check-session</text>
  
  <line x1="990" y1="290" x2="450" y2="290" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="720" y="280" font-family="Arial" font-size="14" text-anchor="middle">Returns session data (username: "Jack Rogers")</text>
  
  <line x1="450" y1="320" x2="635" y2="320" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="540" y="310" font-family="Arial" font-size="14" text-anchor="middle">Pass isLoggedIn=true, userName="Jack Rogers", userType="customer"</text>
  
  <line x1="635" y1="350" x2="820" y2="350" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="725" y="340" font-family="Arial" font-size="14" text-anchor="middle">Render with props (isLoggedIn=true, userType="customer", showChat=true)</text>
  
  <!-- Section: Non-Guided Flow -->
  <rect x="50" y="390" width="1100" height="30" fill="#e6e6e6" stroke="#000000" stroke-width="1"/>
  <text x="600" y="410" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Non-Guided Flow</text>
  
  <!-- Non-Guided Flow Messages -->
  <line x1="110" y1="450" x2="280" y2="450" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="195" y="440" font-family="Arial" font-size="14" text-anchor="middle" width="170">Inputs "Book an appointment for next Monday 2pm at Manhattan for a loan consultation"</text>
  
  <line x1="280" y1="480" x2="820" y2="480" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="550" y="470" font-family="Arial" font-size="14" text-anchor="middle">handleSend("Book an appointment...")</text>
  
  <line x1="820" y1="510" x2="990" y2="510" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="905" y="500" font-family="Arial" font-size="14" text-anchor="middle">POST /api/chat (query="Book an appointment...")</text>
  
  <line x1="990" y1="540" x2="1140" y2="540" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="1065" y="530" font-family="Arial" font-size="14" text-anchor="middle">Query previous appointments (optional context)</text>
  
  <line x1="1140" y1="570" x2="990" y2="570" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="1065" y="560" font-family="Arial" font-size="14" text-anchor="middle">Returns previous appointments</text>
  
  <line x1="990" y1="600" x2="1290" y2="600" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="1140" y="590" font-family="Arial" font-size="14" text-anchor="middle">Generate response with appointment details</text>
  
  <line x1="1290" y1="630" x2="990" y2="630" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="1140" y="620" font-family="Arial" font-size="14" text-anchor="middle">Returns JSON with response and appointmentDetails</text>
  
  <line x1="990" y1="660" x2="1140" y2="660" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="1065" y="650" font-family="Arial" font-size="14" text-anchor="middle">Create Appointment__c record (if all details present)</text>
  
  <line x1="1140" y1="690" x2="990" y2="690" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="1065" y="680" font-family="Arial" font-size="14" text-anchor="middle">Returns appointment ID</text>
  
  <line x1="990" y1="720" x2="820" y2="720" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="905" y="710" font-family="Arial" font-size="14" text-anchor="middle">Response with appointmentDetails and confirmation</text>
  
  <line x1="820" y1="750" x2="110" y2="750" stroke="#000000" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <text x="465" y="740" font-family="Arial" font-size="14" text-anchor="middle">Display confirmation or request missing details</text>
  
  <!-- Arrow Definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#000000"/>
    </marker>
  </defs>
</svg>
